UE = CS.UnityEngine

velocity = 3
jumpForce = 5

bird = nill
bird_rb = nil


function LuaStart()
    --print("Goi start tu Lua")
    
    bird = self.gameObject
    bird_rb = CS.Extensions.AddRigidbody2D(bird)
    --bird_rb = bird:GetComponent(typeof(UE.Rigidbody2D))
end

function LuaUpdate()
    if (UE.Input.GetKeyDown(UE.KeyCode.Space)) then
        --print("Space pressed")
        bird_rb.velocity = UE.Vector2.up * jumpForce
        UE.Object.FindObjectOfType(typeof(CS.AudioManager)):Play("Swing")
    end
end


function LuaOnCollisionEnter2D(other)
    if (other.gameObject:CompareTag("Pipe") == true) then
        --print("Bird va chạm với Pipe, gọi từ Lua")
        HandleGameOver()
    end
end

function LuaOnTriggerEnter2D(other)
    if (other.gameObject:CompareTag("DeathZone") == true) then
        --print("Bird va chạm với Death Zone, gọi từ Lua")
        HandleGameOver()
    end
end

function HandleGameOver()
    audioManager = UE.Object.FindObjectOfType(typeof(CS.AudioManager))
    audioManager:Play("HitObject")
    audioManager:Play("Lose")

    UE.Object.FindObjectOfType(typeof(CS.GameController)):ShowGameOverPanel()
end


function GetVector3D(x, y, z)
    return UE.Vector3(x, y, z)
end

function GetVector2D(x, y)
    return UE.Vector2(x, y)
end